# ВИДЕО ХОСТИНГ

## Сценарий использования
Пользователь может загрузить видео (сами данные, название, описание и т.д.), при необходимости может удалить его, изменить и, конечно, поделиться ссылкой на него.

## Эндпоинты
* `/upload?name=<name>[&description=<desc>]` - загрузить видео на сервис
* `/watch?video=<id>` - посомтреть видео
* `/info?video=<id>` - мета информация про видео
* `/delete?video=<id>` - удалить видео
* `/change?video=<id>&param=<new-param>` - измениьт мета информацию  
`param` =
    * content - само видео
    * name - название
    * description - описание

## Тесты
```
./test.sh
```
## Выбор СУБД

### Redis

NoSQL СУДБ - key-value storage

#### Плюсы 

* Cкорость
* Простота настройки
* Большой размер key-value пары
* Open source
* Много структур данных из коробки
* Масштабируемость

#### Минусы

* Требователен к оперативной памяти
* Сложная настройка конфигурации клиента для подключения
* Реплика требует минимум одного подчинённого для master

### PostgreSQL

#### Плюсы 

* Полное соответствие стандартам SQL + свой функционал
* Open source
* Активное, развивающееся комьюнити
* Параллельное выполнение запросы на нескольких серверах
* Объектно-реляционная СУБД - наследование, перегрузка и т.д.
* Хорошая поддержка репликации и шардинга

#### Минусы 

* Не самый лучший перфоманс при маленьких таблицах
* Не простая настройка по сравнению с некоторыми аналогами

### MySQL

#### Плюсы 

* Самая популярная СУБД
* Очень быстрая на маленьких таблицах
* Хорошая поддержка репликации и шардинга
* Продуманное администрирование
* Много расширений и документации

#### Минусы 

* Не полностью open source
* Поддерживается одной компанией
* Не весь стандарт SQL
* Плохой перфоманс на больших таблицах

### Вывод
Redis не подходит, так как это key-value хранилище, а видео, в моём сервисе не описывается только парой.  
MySQL не берём из-за её поддержки и скорости работы на больших таблицах.  
Остаётся PostgreSQL у которого нет проблем для наших сценариев, значит выбираем его.

## Использование брокера сообщений

Используемый брокер: Kafka.  
Сценарий использования: запоминание места где пользователь закончил смготреть видео. Когда пользователь смотрит видео плеер шлёт телеметрию в топик, мы парсим её и сохраняем временную отметку на видео.